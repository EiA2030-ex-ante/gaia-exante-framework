# GAIA-EXANTE-FRAMEWORK

This repository contains the **GAIA Ex-ante Framework**, a  framework for data-driven, ex-ante analysis of soil
acidity across sub-saharan Afric  and the broader implications of agricultural interventions, such as lime application and yield improvement strategies on crop yield responses to liming and profitability. The framework is structured into several scripts that collectively enable us to process data, model responses, conduct sensitivity analyses, and generate summaries and visualizations. For more information on the framework, please refer to the [GAIA project website](https://www.acidsoils.africa).


## Folder Structure

### 1. `data-input`
This folder contains raw input datasets required for analysis.
    - **`before-you-start.txt`**: A quick guide outlining prerequisites, including include soil data, crop yield information, spatial layers, and related files.

### 2. `data-output`
This folder contains the outputs generated by the scripts, including cleaned datasets, analysis results, and visualizations.

### 3. `scripts-1-workflow`
Contains the main scripts for running the GAIA framework workflow. The workflow is sequential and follows logical steps for preparing data, modeling, and analysis.


- **`wow-0-install-packages.R`**: Installs all the required R packages to run the framework.
- **`wow-1-layers-soilgrids.R`**: Processes soil data layers from SoilGrids or similar sources.
- **`wow-2-layers-spam.R`**: Processes SPAM (Spatial Production Allocation Model) data layers for crop-specific details.
- **`wow-3-lime-requirements.R`**: Calculates lime requirements based on soil acidity and crop demands.
- **`wow-4-crop-parameters.R`**: Sets crop-specific parameters for yield modeling.
- **`wow-5-crop-yield-loss-function.R`**: Models crop yield loss due to limiting factors such as soil acidity.
- **`wow-6-crop-yield-response.R`**: Simulates crop yield responses to agricultural interventions, such as lime application.
- **`wow-7-profitability-function.R`**: Evaluates profitability based on yield improvements and cost considerations.

### 4. `scripts-2-sensitivity`
Scripts for conducting sensitivity analyses and exploring different scenarios. These scripts assess variations in yield, profitability, and intervention impacts.

- **`1-yield-quantiles.R`**: Calculates yield quantiles for analysis and visualizations.
- **`2-sensitivity-profit.R`**: Conducts sensitivity analyses for profitability under various scenarios.
- **`3-beneficiaries.R`**: Analyzes the number and characteristics of beneficiaries impacted by interventions.

### 5. `scripts-3-summaries`
Scripts for summarizing results, generating tables, and creating visualizations.

- **`result-visualization_functions.R`**: Contains functions for visualizing analysis results.
- **`table-functions.R`**: Utility functions for generating formatted tables.
- **`1-admin-summaries.R`**: Generates administrative-level summaries for analysis results.
- **`2-result-visualization-and-report.R`**: Creates visualizations and generates reports summarizing key findings.

### 6. `tmp`
A temporary folder for intermediate files and data generated during the workflow.

### Additional Files
- **`.gitignore`**: Specifies files and folders to be ignored by Git.
- **`LICENSE`**: Contains the license information for the repository.
- **`README.md`**: This file, providing an overview of the repository structure and usage.

---



### Prerequisites
Ensure you have the following software installed:
- R (version 4.0 or later)
- Required R packages (see `wow-0-install-packages.R` for installation)

### License
This project is licensed under the Creative Commons Attribution 4.0 International License. See the LICENSE file for details.


### Acknowledgments
    - This work was made possible through the OneCGIAR Initiative on Excellence in Agronomy (INV-005431), as well as through the Guiding Acid Soil Management Investments in Africa (GAIA) project (Grant no: INV-029117), supported by the Bill & Melinda Gates Foundation (BMGF). 
    - We would like to thank all funders supporting research through contributions to the CGIAR Trust Fund: https://www.cgiar.org/funders/.
    - This repository leverages data from various sources, including SoilGrids, SPAM, and related agricultural datasets. Special thanks to the data providers and contributors.